<html xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="http://static.stackmob.com/js/stackmob-js-0.9.1-bundled-min.js"></script>
 
<script type="text/javascript">
/* <![CDATA[ */
    StackMob.init({
        publicKey: '6dba825e-b26f-4626-b007-7b09d60ad718',
    apiVersion: 0
  });
/* ]]> */
</script>
 
</head>
<body>
<script>
  //What follows is standard Facebook JS initialization.  See Facebook for more details.
  //Facebook JS SDK code here.  Use your own Facebook App ID
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '163796343784200', // FB App ID
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });
 
    // Additional initialization code here
  };
 
  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = '//connect.facebook.net/en_US/all.js';
     d.getElementsByTagName('head')[0].appendChild(js);
   }(document));
</script>
 
 
<a href="javascript:void(0);" id="login">Create user after logging into Facebook</a>
 
<div id="fb-root"></div>
 
<script type="text/javascript">
function login() {
  //Login with Facebook
  FB.login(function(response) {
    if (response.authResponse) {
      var accessToken = response.authResponse.accessToken;
 
      FB.api('/me', function(response) {
 
        var user = new StackMob.User({ username: response.email });
        user.linkUserWithFacebook(accessToken, false);
 
      });
 
    } else {
      console.log('User cancelled login or did not fully authorize.');
    }
  }, {scope: 'email'});
}
 
  $('#login').click(function() {
    login();
  });
 
</script>
 
</body>
</html>
